{"version":3,"sources":["../../js/lib/fund.js","assets/images/alameda.png","config/funds.ts","models/pools/effects/findPoolsFx.ts","models/app/index.ts","models/connection/layouts/tokenSwap.ts","models/funds/effects/findFundFx.ts","models/funds/effects/findFundsFx.ts","config/index.ts","lib/routing/index.ts","models/wallet/index.ts","components/common/Header/model.ts","components/common/Header/Header.tsx","components/common/MainContainer/MainContainer.tsx","models/modals/index.ts","components/common/ModalManager/constants.ts","config/tokens.ts","components/pages/home/Funds/common/Column/Column.ts","components/pages/home/Funds/FundRow/TokenShare/TokenShare.tsx","components/pages/home/Funds/FundRow/FundRow.tsx","components/ui/Icon/assets/arrow-triangle-icon.svg","components/ui/Icon/assets/checkmark-icon.svg","components/ui/Icon/Icon.tsx","components/pages/home/Funds/Selector/Selector.tsx","components/pages/home/Funds/Funds.tsx","pages/home/Home.tsx","routes.tsx","components/common/ModalManager/ModalManager.tsx","App.tsx","models/app/init.ts","models/wallet/init.ts","models/connection/effects/getParsedTokenAccountsByOwnerFx.ts","models/connection/init.ts","models/funds/init.ts","models/pools/init.ts","models/rates/init.ts","models/modals/init.ts","index.tsx","reportWebVitals.ts","api/connection/index.ts","api/connection/utils/retryableProxy.ts","api/wallet/Wallet.ts","models/funds/index.ts","utils/common.ts","models/connection/index.ts","models/pools/index.ts","api/wallet/index.ts","api/wallet/SolletWallet.ts","models/rates/index.ts","components/ui/Button/Button.tsx","components/common/Avatar/Avatar.tsx"],"names":["__importDefault","this","mod","__esModule","__importStar","result","k","Object","hasOwnProperty","call","defineProperty","exports","value","bn_js_1","require","borsh","web3_js_1","Assignable","properties","keys","map","key","PubKey","PublicKey","OptionAddress","slice","length","PoolRequestTag","default","PoolRequestInner","InitializeFundData","InitializePoolRequest","PoolRequest","AssetInfo","ParamDesc","FundState","PoolState","PoolAction","ExecutePoolAction","schema","Map","kind","fields","Fund","connection","fundProgramId","assign","fundAccount","fundTokenMint","fundVaultAccounts","fundVaultAuthority","lqdFeeAccount","initializerFeeAccount","sysvar","fundAdminAccount","initialSupplyFundTokenAccount","fundBasicTokenVaultAccount","tokenProgramId","nonce","poolName","feeRate","assetWeights","initialSupply","slippageDivider","pubkey","isSigner","isWritable","acc","initializeFundData","serializedInitializeFundData","serialize","initializePoolRequest","assetsLength","customData","poolRequest","tag","index","inner","serializedData","TransactionInstruction","programId","data","Buffer","from","buffer","byteOffset","byteLength","userPoolTokenAccount","userAssetsAccounts","authorityUserAccounts","refferFeeVault","amount","createPoolActionInstruction","Create","Redeem","poolActionType","executePoolAction","poolState","deserialize","fundState","customState","FUNDS","devnet","address","fundName","fundSymbol","icon","findPoolsFx","use","a","getConnection","filters","dataSize","TokenSwapLayout","span","_rpcRequest","SWAP_PROGRAM_ID","toBase58","commitment","encoding","unsafeRes","res","error","Error","message","assert","tokenSwapPromises","account","parseTokenSwap","tokenSwap","getParsedAccountInfo","tokenAccountA","tokenAccountAResult","tokenAccountAPopulated","path","tokenAccountB","tokenAccountBResult","tokenAccountBPopulated","poolToken","poolTokenResult","poolTokenPopulated","Promise","all","tokenSwaps","filter","complement","isNil","app","createDomain","AppGate","createGate","tokenSwapData","decode","isInitialized","findProgramAddress","toBuffer","authority","tokenPool","feeAccount","mintA","mintB","tradeFeeNumerator","Numberu64","fromBuffer","tradeFeeDenominator","ownerTradeFeeNumerator","ownerTradeFeeDenominator","ownerWithdrawFeeNumerator","ownerWithdrawFeeDenominator","hostFeeNumerator","hostFeeDenominator","curveType","findFundFx","fundAddress","getAccountInfo","parsedData","decodePoolState","addresses","assets","forEach","asset","push","vaultAddress","mint","poolTokenMint","commiment","accountsResult","vaultPopulated","mintPopulated","poolTokenMintPopulated","executable","owner","lamports","findFundsFx","DTF_PROGRAM_ID","cryptoCompareApiKey","process","REACT_APP_CRYPTO_COMPARE_API_KEY","defaultCommitment","REACT_APP_DEFAULT_COMMITMENT","postTransactionSleepMS","Number","REACT_APP_POST_TRANSACTION_SLEEP_MS","TOKEN_PROGRAM_ID","REACT_APP_DTF_PROGRAM_ID","REACT_APP_SWAP_PROGRAM_ID","HOST_FEE_VAULT","REACT_APP_HOST_FEE_VAULT","history","createBrowserHistory","basename","window","location","pathname","connectFx","createEffect","disconnectFx","$cluster","createStore","$type","createEvent","WalletType","SOLLET","$connected","$wallet","connectClicked","forward","to","Wrapper","Container","Left","LogoLink","ByA","Right","Header","connected","useStore","href","target","rel","primary","onClick","MainContainer","className","style","$modals","closeModalFx","closeModal","openModalFx","openModal","MODAL_INVEST","MODAL_WITHDRAW","TOKENS","TOKENS_ORIGINAL","tokenSymbol","mintAddress","tokenName","website","Column","TokenName","TokenShareValue","TokenShare","tokenWeight","tokenMeta","token","size","src","shortAddress","TopWrapper","InfoWrapper","FundName","FundDate","ColumnValue","ColumnButtons","ButtonStyled","BottomWrapper","TokenSharesRow","FundRow","fund","ratesMap","fundMarketCap","useMemo","console","rate","marketCap","fundPrice","fundMeta","fundItem","tokens","weight","b","modalType","props","classNames","isHoverable","name","title","String","moneyFormat","price","since","profit","balance","disabled","e","iconsMap","arrowTriangle","checkmark","Icon","height","width","validProps","prop","isPropValid","get","viewBox","xlinkHref","id","SelectorWrapper","ArrowWrapper","ArrowIcon","DropDownList","Selector","children","selectorRef","useRef","useState","handleAwayClick","setIsOpen","useEffect","ref","isOpen","Title","ColumnsHeader","ColumnName","FundList","Funds","funds","Description","FundsStyled","Home","Pages","renderRoutes","isAuth","exact","component","route","needAuth","ModalContainer","ModalWrapper","ModalBackground","modalsMap","lazy","ModalManager","modals","closeTopModal","modal","last","modalId","modalRef","modalsRefs","handleWrapperClick","dialogs","ModalComponent","getReadyDialogs","createRef","setModalsRefs","state","fallback","close","App","useGate","onCreateEffect","newEffect","failData","watch","payload","on","done","doneData","_","wallet","getParsedTokenAccountsByOwnerFx","cluster","getState","type","WalletAPI","WalletEvent","DISCONNECT","CONFIRMED","transactionSignature","info","getWallet","getParsedTokenAccountsByOwner","parsed","$tokenAccounts","tokenAccounts","log","sort","tokenAmount","uiAmount","$funds","newFund","find","equals","open","$pools","newPools","$ratesMap","fetchRatesFx","newRates","newState","symbol","symbols","fetch","join","ok","json","rates","USD","promises","dialogInfo","resolve","delete","some","promise","set","dialog","concat","createInspector","onPerfEntry","globals","ReactDOM","document","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","currentCluster","defaultRetryOptions","count","intervalMS","backoutMultiplier","DEFAULT_COMMITMENT","createConnection","memoizeWith","identity","network","Connection","fnName","fn","retryOptions","options","mergeLeft","retryReducer","thisArg","argArray","previousValue","currentValue","currentIndex","apply","catch","sleepMs","sleep","Proxy","Array","reduce","retryableProxy","getNetwork","clusterApiUrl","confirmTransaction","signature","confirmViaSocket","onSignature","signatureResult","confirmViaHttp","race","Wallet","transaction","signTransaction","signedTransaction","emit","SIGNED","EventEmitter","ms","setTimeout","Intl","NumberFormat","currency","format","DEFAULT_PROVIDER","SolletWallet","provider","solletWallet","SolletWalletAdapter","CONNECT","connect","publicKey","disconnect","POST_TRANSACTION_SLEEP_MS","ERROR_CONNECT_FIRST","createWallet","BONFIDA","newWallet","makeTransaction","instructions","signers","getRecentBlockhash","recentBlockhash","blockhash","signatures","Transaction","add","partialSign","defaultSendOptions","preflightCommitment","awaitConfirmation","sendTransaction","sign","signed","nacl","detached","verify","serializeMessage","sendRawTransaction","ButtonElement","Button","hollow","full","Avatar"],"mappings":"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","file":"static/js/main.3da52dc5.chunk.js","sourcesContent":["\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result[\"default\"] = mod;\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\r\nconst borsh = __importStar(require(\"borsh\"));\r\nconst web3_js_1 = require(\"@solana/web3.js\");\r\nclass Assignable {\r\n    constructor(properties) {\r\n        Object.keys(properties).map((key) => {\r\n            this[key] = properties[key];\r\n        });\r\n    }\r\n}\r\nclass PubKey extends web3_js_1.PublicKey {\r\n    constructor({ value }) {\r\n        super(value);\r\n    }\r\n}\r\nclass OptionAddress extends web3_js_1.PublicKey {\r\n    constructor({ value }) {\r\n        super(value.slice(1, value.length));\r\n    }\r\n}\r\nconst PoolRequestTag = new bn_js_1.default('220a6cbdcd1cc4cf', 'hex');\r\nclass PoolRequestInner extends Assignable {\r\n}\r\nexports.PoolRequestInner = PoolRequestInner;\r\nclass InitializeFundData extends Assignable {\r\n}\r\nexports.InitializeFundData = InitializeFundData;\r\nclass InitializePoolRequest extends PoolRequestInner {\r\n}\r\nexports.InitializePoolRequest = InitializePoolRequest;\r\nclass PoolRequest extends Assignable {\r\n}\r\nexports.PoolRequest = PoolRequest;\r\nclass AssetInfo extends Assignable {\r\n}\r\nexports.AssetInfo = AssetInfo;\r\nclass ParamDesc extends Assignable {\r\n}\r\nexports.ParamDesc = ParamDesc;\r\nclass FundState extends Assignable {\r\n}\r\nexports.FundState = FundState;\r\nclass PoolState extends Assignable {\r\n}\r\nexports.PoolState = PoolState;\r\nclass ExecutePoolAction extends PoolRequestInner {\r\n}\r\nexports.schema = new Map([\r\n    [\r\n        PoolRequest,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['tag', 'u64'],\r\n                ['index', 'u8'],\r\n                ['inner', PoolRequestInner],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        InitializePoolRequest,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['nonce', 'u8'],\r\n                ['assetsLength', 'u8'],\r\n                ['poolName', 'string'],\r\n                ['feeRate', 'u32'],\r\n                ['customData', ['u8']],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        InitializeFundData,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['slippageDivider', 'u64'],\r\n                ['assetWeights', ['u32']],\r\n                ['initialSupply', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        OptionAddress,\r\n        {\r\n            kind: 'struct',\r\n            fields: [['value', [33]]],\r\n        },\r\n    ],\r\n    [\r\n        PubKey,\r\n        {\r\n            kind: 'struct',\r\n            fields: [['value', [32]]],\r\n        },\r\n    ],\r\n    [\r\n        AssetInfo,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['mint', PubKey],\r\n                ['vaultAddress', PubKey],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        PoolState,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['tag', 'u64'],\r\n                ['poolTokenMint', PubKey],\r\n                ['assets', [AssetInfo]],\r\n                ['vaultSigner', PubKey],\r\n                ['vaultSignerNonce', 'u8'],\r\n                ['accountParams', [ParamDesc]],\r\n                ['name', 'string'],\r\n                ['lqdFeeVault', PubKey],\r\n                ['initializerFeeVault', PubKey],\r\n                ['feeRate', 'u32'],\r\n                ['adminKey', OptionAddress],\r\n                ['customState', ['u8']],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        ParamDesc,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['address', PubKey],\r\n                ['writable', 'u8'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        FundState,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['paused', 'u8'],\r\n                ['slippageDivider', 'u64'],\r\n                ['assetWeights', ['u32']],\r\n                ['basicAsset', AssetInfo],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        ExecutePoolAction,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['index', 'u8'],\r\n                ['amount', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n]);\r\nvar PoolAction;\r\n(function (PoolAction) {\r\n    PoolAction[PoolAction[\"Create\"] = 1] = \"Create\";\r\n    PoolAction[PoolAction[\"Redeem\"] = 2] = \"Redeem\";\r\n})(PoolAction = exports.PoolAction || (exports.PoolAction = {}));\r\nclass Fund {\r\n    constructor(connection, fundProgramId) {\r\n        Object.assign(this, {\r\n            connection,\r\n            fundProgramId,\r\n        });\r\n    }\r\n    static createInitializeInstruction(fundProgramId, fundAccount, fundTokenMint, fundVaultAccounts, fundVaultAuthority, lqdFeeAccount, initializerFeeAccount, sysvar, fundAdminAccount, initialSupplyFundTokenAccount, fundBasicTokenVaultAccount, tokenProgramId, nonce, poolName, feeRate, assetWeights, initialSupply, slippageDivider) {\r\n        const keys = [\r\n            { pubkey: fundAccount, isSigner: false, isWritable: true },\r\n            { pubkey: fundTokenMint, isSigner: false, isWritable: true },\r\n            ...fundVaultAccounts.map((acc) => ({ pubkey: acc, isSigner: false, isWritable: true })),\r\n            { pubkey: fundVaultAuthority, isSigner: false, isWritable: false },\r\n            { pubkey: lqdFeeAccount, isSigner: false, isWritable: false },\r\n            { pubkey: initializerFeeAccount, isSigner: false, isWritable: false },\r\n            { pubkey: sysvar, isSigner: false, isWritable: false },\r\n            { pubkey: fundAdminAccount, isSigner: false, isWritable: true },\r\n            { pubkey: initialSupplyFundTokenAccount, isSigner: false, isWritable: true },\r\n            { pubkey: fundBasicTokenVaultAccount, isSigner: false, isWritable: false },\r\n            { pubkey: tokenProgramId, isSigner: false, isWritable: false },\r\n        ];\r\n        const initializeFundData = new InitializeFundData({\r\n            slippageDivider,\r\n            assetWeights,\r\n            initialSupply,\r\n        });\r\n        const serializedInitializeFundData = borsh.serialize(exports.schema, initializeFundData);\r\n        const initializePoolRequest = new InitializePoolRequest({\r\n            nonce,\r\n            assetsLength: fundVaultAccounts.length,\r\n            poolName,\r\n            feeRate,\r\n            customData: serializedInitializeFundData,\r\n        });\r\n        const poolRequest = new PoolRequest({\r\n            tag: PoolRequestTag,\r\n            index: 0,\r\n            inner: initializePoolRequest,\r\n        });\r\n        const serializedData = borsh.serialize(exports.schema, poolRequest);\r\n        return new web3_js_1.TransactionInstruction({\r\n            keys,\r\n            programId: fundProgramId,\r\n            data: Buffer.from(serializedData.buffer, serializedData.byteOffset, serializedData.byteLength),\r\n        });\r\n    }\r\n    static createExecuteInstruction(fundProgramId, fundAccount, fundTokenMint, fundVaultAccounts, fundVaultAuthority, userPoolTokenAccount, userAssetsAccounts, authorityUserAccounts, lqdFeeAccount, initializerFeeAccount, refferFeeVault, tokenProgramId, amount) {\r\n        return Fund.createPoolActionInstruction(fundProgramId, fundAccount, fundTokenMint, fundVaultAccounts, fundVaultAuthority, userPoolTokenAccount, userAssetsAccounts, authorityUserAccounts, lqdFeeAccount, initializerFeeAccount, refferFeeVault, tokenProgramId, PoolAction.Create, amount);\r\n    }\r\n    static createRedeemInstruction(fundProgramId, fundAccount, fundTokenMint, fundVaultAccounts, fundVaultAuthority, userPoolTokenAccount, userAssetsAccounts, authorityUserAccounts, lqdFeeAccount, initializerFeeAccount, refferFeeVault, tokenProgramId, amount) {\r\n        return Fund.createPoolActionInstruction(fundProgramId, fundAccount, fundTokenMint, fundVaultAccounts, fundVaultAuthority, userPoolTokenAccount, userAssetsAccounts, authorityUserAccounts, lqdFeeAccount, initializerFeeAccount, refferFeeVault, tokenProgramId, PoolAction.Redeem, amount);\r\n    }\r\n    static createPoolActionInstruction(fundProgramId, fundAccount, fundTokenMint, fundVaultAccounts, fundVaultAuthority, userPoolTokenAccount, userAssetsAccounts, authorityUserAccounts, lqdFeeAccount, initializerFeeAccount, refferFeeVault, tokenProgramId, poolActionType, amount) {\r\n        const keys = [\r\n            { pubkey: fundAccount, isSigner: false, isWritable: true },\r\n            { pubkey: fundTokenMint, isSigner: false, isWritable: true },\r\n            ...fundVaultAccounts.map((acc) => ({ pubkey: acc, isSigner: false, isWritable: true })),\r\n            { pubkey: fundVaultAuthority, isSigner: false, isWritable: false },\r\n            { pubkey: userPoolTokenAccount, isSigner: false, isWritable: true },\r\n            ...userAssetsAccounts.map((acc) => ({ pubkey: acc, isSigner: false, isWritable: true })),\r\n            { pubkey: authorityUserAccounts, isSigner: true, isWritable: false },\r\n            { pubkey: lqdFeeAccount, isSigner: false, isWritable: true },\r\n            { pubkey: initializerFeeAccount, isSigner: false, isWritable: true },\r\n            { pubkey: refferFeeVault, isSigner: false, isWritable: true },\r\n            { pubkey: tokenProgramId, isSigner: false, isWritable: false },\r\n        ];\r\n        const executePoolAction = new ExecutePoolAction({\r\n            index: poolActionType,\r\n            amount,\r\n        });\r\n        const poolRequest = new PoolRequest({\r\n            tag: PoolRequestTag,\r\n            index: 2,\r\n            inner: executePoolAction,\r\n        });\r\n        const serializedData = borsh.serialize(exports.schema, poolRequest);\r\n        return new web3_js_1.TransactionInstruction({\r\n            keys,\r\n            programId: fundProgramId,\r\n            data: Buffer.from(serializedData.buffer, serializedData.byteOffset, serializedData.byteLength),\r\n        });\r\n    }\r\n    static decodePoolState(buffer) {\r\n        const poolState = borsh.deserialize(exports.schema, PoolState, buffer);\r\n        const fundState = borsh.deserialize(exports.schema, FundState, Buffer.from(poolState.customState));\r\n        poolState.fundState = fundState;\r\n        return poolState;\r\n    }\r\n}\r\nexports.Fund = Fund;\r\n","export default \"data:image/png;base64,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\"","import alamedaImg from 'assets/images/alameda.png';\r\n\r\nexport const FUNDS = {\r\n  devnet: [\r\n    {\r\n      address: 't72redTRJkPtUmTWWvPyjnkFKGVrHakv3DBQTheY4oD',\r\n      fundName: 'Alameda Bull DTF',\r\n      fundSymbol: 'AB',\r\n      icon: alamedaImg,\r\n    },\r\n  ],\r\n};\r\n","import assert from 'assert';\r\nimport { PublicKey } from '@solana/web3.js';\r\nimport { complement, isNil, path } from 'ramda';\r\nimport { TokenSwapLayout } from '@solana/spl-token-swap';\r\nimport { getConnection } from 'api/connection';\r\nimport { SWAP_PROGRAM_ID } from 'config';\r\nimport { parseTokenSwap } from '../../connection/layouts/tokenSwap';\r\nimport { findPoolsFx } from '..';\r\nimport {\r\n  TokenAccountPopulated,\r\n  TokenPopulated,\r\n  TokenSwapPopulated,\r\n} from '../../types';\r\n\r\nfindPoolsFx.use(async () => {\r\n  const connection = getConnection();\r\n\r\n  const filters = [\r\n    {\r\n      dataSize: TokenSwapLayout.span,\r\n    },\r\n  ];\r\n\r\n  const unsafeRes = await connection._rpcRequest('getProgramAccounts', [\r\n    SWAP_PROGRAM_ID.toBase58(),\r\n    {\r\n      commitment: connection.commitment,\r\n      filters,\r\n      encoding: 'base64',\r\n    },\r\n  ]);\r\n\r\n  const res = unsafeRes;\r\n  if (res.error) {\r\n    throw new Error(\r\n      'failed to get accounts owned by program ' +\r\n        SWAP_PROGRAM_ID.toBase58() +\r\n        ': ' +\r\n        res.error.message,\r\n    );\r\n  }\r\n\r\n  const { result } = res;\r\n  assert(typeof result !== 'undefined');\r\n\r\n  const tokenSwapPromises = result.map(async (result: any) => {\r\n    assert(result.account.data[1] === 'base64');\r\n\r\n    const tokenSwap = (await parseTokenSwap(\r\n      new PublicKey(result.pubkey),\r\n      Buffer.from(result.account.data[0], 'base64'),\r\n      SWAP_PROGRAM_ID,\r\n    )) as TokenSwapPopulated;\r\n\r\n    // TODO: multiple\r\n    const tokenAccountAResult = await connection.getParsedAccountInfo(\r\n      tokenSwap.tokenAccountA,\r\n    );\r\n    tokenSwap.tokenAccountAPopulated = path<TokenAccountPopulated>(\r\n      ['value', 'data', 'parsed', 'info'],\r\n      tokenAccountAResult,\r\n    );\r\n\r\n    const tokenAccountBResult = await connection.getParsedAccountInfo(\r\n      tokenSwap.tokenAccountB,\r\n    );\r\n    tokenSwap.tokenAccountBPopulated = path<TokenAccountPopulated>(\r\n      ['value', 'data', 'parsed', 'info'],\r\n      tokenAccountBResult,\r\n    );\r\n\r\n    const poolTokenResult = await connection.getParsedAccountInfo(\r\n      tokenSwap.poolToken,\r\n    );\r\n    tokenSwap.poolTokenPopulated = path<TokenPopulated>(\r\n      ['value', 'data', 'parsed', 'info'],\r\n      poolTokenResult,\r\n    );\r\n\r\n    return tokenSwap;\r\n  });\r\n\r\n  const tokenSwaps = await Promise.all(tokenSwapPromises);\r\n\r\n  return tokenSwaps.filter(complement(isNil)) as TokenSwapPopulated[];\r\n});\r\n","import { createDomain } from 'effector';\r\nimport { createGate } from 'effector-react';\r\n\r\nexport const app = createDomain();\r\n\r\nexport const AppGate = createGate();\r\n","import { Numberu64, TokenSwapLayout } from '@solana/spl-token-swap';\r\nimport { PublicKey } from '@solana/web3.js';\r\n\r\nexport interface TokenSwapType {\r\n  address: PublicKey;\r\n  programId: PublicKey;\r\n  tokenProgramId: PublicKey;\r\n  poolToken: PublicKey;\r\n  feeAccount: PublicKey;\r\n  authority: PublicKey;\r\n  tokenAccountA: PublicKey;\r\n  tokenAccountB: PublicKey;\r\n  mintA: PublicKey;\r\n  mintB: PublicKey;\r\n  tradeFeeNumerator: Numberu64;\r\n  tradeFeeDenominator: Numberu64;\r\n  ownerTradeFeeNumerator: Numberu64;\r\n  ownerTradeFeeDenominator: Numberu64;\r\n  ownerWithdrawFeeNumerator: Numberu64;\r\n  ownerWithdrawFeeDenominator: Numberu64;\r\n  hostFeeNumerator: Numberu64;\r\n  hostFeeDenominator: Numberu64;\r\n  curveType: string;\r\n}\r\n\r\nexport const parseTokenSwap = async (\r\n  address: PublicKey,\r\n  data: Buffer,\r\n  programId: PublicKey,\r\n): Promise<TokenSwapType> => {\r\n  const tokenSwapData = TokenSwapLayout.decode(data);\r\n  if (!tokenSwapData.isInitialized) {\r\n    throw new Error(`Invalid token swap state`);\r\n  }\r\n\r\n  const [authority] = await PublicKey.findProgramAddress(\r\n    [address.toBuffer()],\r\n    programId,\r\n  );\r\n\r\n  const poolToken = new PublicKey(tokenSwapData.tokenPool);\r\n  const feeAccount = new PublicKey(tokenSwapData.feeAccount);\r\n  const tokenAccountA = new PublicKey(tokenSwapData.tokenAccountA);\r\n  const tokenAccountB = new PublicKey(tokenSwapData.tokenAccountB);\r\n  const mintA = new PublicKey(tokenSwapData.mintA);\r\n  const mintB = new PublicKey(tokenSwapData.mintB);\r\n  const tokenProgramId = new PublicKey(tokenSwapData.tokenProgramId);\r\n\r\n  const tradeFeeNumerator = Numberu64.fromBuffer(\r\n    tokenSwapData.tradeFeeNumerator,\r\n  );\r\n  const tradeFeeDenominator = Numberu64.fromBuffer(\r\n    tokenSwapData.tradeFeeDenominator,\r\n  );\r\n  const ownerTradeFeeNumerator = Numberu64.fromBuffer(\r\n    tokenSwapData.ownerTradeFeeNumerator,\r\n  );\r\n  const ownerTradeFeeDenominator = Numberu64.fromBuffer(\r\n    tokenSwapData.ownerTradeFeeDenominator,\r\n  );\r\n  const ownerWithdrawFeeNumerator = Numberu64.fromBuffer(\r\n    tokenSwapData.ownerWithdrawFeeNumerator,\r\n  );\r\n  const ownerWithdrawFeeDenominator = Numberu64.fromBuffer(\r\n    tokenSwapData.ownerWithdrawFeeDenominator,\r\n  );\r\n  const hostFeeNumerator = Numberu64.fromBuffer(tokenSwapData.hostFeeNumerator);\r\n  const hostFeeDenominator = Numberu64.fromBuffer(\r\n    tokenSwapData.hostFeeDenominator,\r\n  );\r\n  const curveType = tokenSwapData.curveType;\r\n\r\n  return {\r\n    address,\r\n    programId,\r\n    tokenProgramId,\r\n    poolToken,\r\n    feeAccount,\r\n    authority,\r\n    tokenAccountA,\r\n    tokenAccountB,\r\n    mintA,\r\n    mintB,\r\n    tradeFeeNumerator,\r\n    tradeFeeDenominator,\r\n    ownerTradeFeeNumerator,\r\n    ownerTradeFeeDenominator,\r\n    ownerWithdrawFeeNumerator,\r\n    ownerWithdrawFeeDenominator,\r\n    hostFeeNumerator,\r\n    hostFeeDenominator,\r\n    curveType,\r\n  };\r\n};\r\n","import { path } from 'ramda';\r\nimport { getConnection } from 'api/connection';\r\nimport {\r\n  PoolStatePopulated,\r\n  TokenAccountPopulated,\r\n  TokenPopulated,\r\n} from 'models/types';\r\nimport { findFundFx } from '..';\r\nimport { Fund } from '../../../../../js/lib/fund';\r\n\r\nfindFundFx.use(async (fundAddress) => {\r\n  const connection = getConnection();\r\n\r\n  const result = await connection.getAccountInfo(fundAddress);\r\n\r\n  if (!result) {\r\n    throw new Error(`fund doesn't exists`);\r\n  }\r\n\r\n  const parsedData = Fund.decodePoolState(\r\n    Buffer.from(result.data),\r\n  ) as PoolStatePopulated;\r\n\r\n  const addresses = [];\r\n  parsedData.assets.forEach((asset) =>\r\n    addresses.push(asset.vaultAddress.toBase58()),\r\n  );\r\n  parsedData.assets.forEach((asset) => addresses.push(asset.mint.toBase58()));\r\n\r\n  addresses.push(parsedData.poolTokenMint.toBase58());\r\n\r\n  const accountsResult = await connection._rpcRequest('getMultipleAccounts', [\r\n    addresses,\r\n    { commiment: connection.commitment, encoding: 'jsonParsed' },\r\n  ]);\r\n\r\n  parsedData.assets = parsedData.assets.map((asset, index) => {\r\n    const vaultPopulated = path<TokenAccountPopulated>(\r\n      ['result', 'value', index, 'data', 'parsed', 'info'],\r\n      accountsResult,\r\n    );\r\n\r\n    const mintPopulated = path<TokenPopulated>(\r\n      [\r\n        'result',\r\n        'value',\r\n        parsedData.assets.length + index,\r\n        'data',\r\n        'parsed',\r\n        'info',\r\n      ],\r\n      accountsResult,\r\n    );\r\n\r\n    return {\r\n      ...asset,\r\n      mintPopulated,\r\n      vaultPopulated,\r\n    };\r\n  });\r\n\r\n  parsedData.poolTokenMintPopulated = path<TokenPopulated>(\r\n    ['result', 'value', parsedData.assets.length * 2, 'data', 'parsed', 'info'],\r\n    accountsResult,\r\n  );\r\n\r\n  return {\r\n    pubkey: fundAddress,\r\n    account: {\r\n      executable: result.executable,\r\n      owner: result.owner,\r\n      lamports: result.lamports,\r\n      data: parsedData,\r\n    },\r\n  };\r\n});\r\n","import assert from 'assert';\r\nimport { PublicKey } from '@solana/web3.js';\r\nimport { complement, isNil } from 'ramda';\r\nimport { getConnection } from 'api/connection';\r\nimport { DTF_PROGRAM_ID } from 'config';\r\nimport { findFundsFx } from '..';\r\nimport { Fund } from '../../../../../js/lib/fund';\r\n\r\nfindFundsFx.use(async () => {\r\n  const connection = getConnection();\r\n\r\n  const filters = [\r\n    {\r\n      dataSize: 751,\r\n    },\r\n  ];\r\n\r\n  const unsafeRes = await connection._rpcRequest('getProgramAccounts', [\r\n    DTF_PROGRAM_ID.toBase58(),\r\n    {\r\n      commitment: connection.commitment,\r\n      filters,\r\n      encoding: 'base64',\r\n    },\r\n  ]);\r\n\r\n  const res = unsafeRes;\r\n  if (res.error) {\r\n    throw new Error(\r\n      'failed to get accounts owned by program ' +\r\n        DTF_PROGRAM_ID.toBase58() +\r\n        ': ' +\r\n        res.error.message,\r\n    );\r\n  }\r\n\r\n  const { result } = res;\r\n  assert(typeof result !== 'undefined');\r\n\r\n  return result\r\n    .map((result: any) => {\r\n      assert(result.account.data[1] === 'base64');\r\n\r\n      const parsedData = Fund.decodePoolState(\r\n        Buffer.from(result.account.data[0], 'base64'),\r\n      );\r\n\r\n      return {\r\n        pubkey: new PublicKey(result.pubkey),\r\n        account: {\r\n          executable: result.account.executable,\r\n          owner: new PublicKey(result.account.owner),\r\n          lamports: result.account.lamports,\r\n          data: parsedData,\r\n        },\r\n      };\r\n    })\r\n    .filter(complement(isNil));\r\n});\r\n","// the default commitment uesd by the Solana web3 connection when checking the blockchain state\r\nimport { Commitment, PublicKey } from '@solana/web3.js';\r\n\r\nexport const isDev =\r\n  process.env.NODE_ENV === 'development' || process.env.NODE_ENV === 'test';\r\n\r\nexport const cryptoCompareApiKey = process.env.REACT_APP_CRYPTO_COMPARE_API_KEY;\r\n\r\nexport const defaultCommitment: Commitment =\r\n  (process.env.REACT_APP_DEFAULT_COMMITMENT as Commitment) || 'processed';\r\n\r\n// the amount of time to sleep after sending a transaction\r\n// in order to work around a known solana web3 bug\r\nexport const postTransactionSleepMS = Number(\r\n  process.env.REACT_APP_POST_TRANSACTION_SLEEP_MS,\r\n);\r\n\r\nexport const TOKEN_PROGRAM_ID = new PublicKey(\r\n  'TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA',\r\n);\r\n\r\nexport const DTF_PROGRAM_ID = new PublicKey(\r\n  process.env.REACT_APP_DTF_PROGRAM_ID ||\r\n    'HWEaSAnjKNADwA2ZopatwCM5BqrnMCPQBKAphf1s6XNW',\r\n);\r\n\r\nexport const SWAP_PROGRAM_ID = new PublicKey(\r\n  process.env.REACT_APP_SWAP_PROGRAM_ID ||\r\n    'SwaPpA9LAaLfeLi3a68M4DjnLqgtticKg6CnyNwgAC8',\r\n);\r\n\r\nexport const HOST_FEE_VAULT = new PublicKey(\r\n  process.env.REACT_APP_HOST_FEE_VAULT ||\r\n    'AHLwq66Cg3CuDJTFtwjPfwjJhifiv6rFwApQNKgX57Yg',\r\n);\r\n","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory({\r\n  basename: window.location.pathname,\r\n});\r\n","import { Cluster } from '@solana/web3.js';\r\nimport { WalletType } from 'api/wallet';\r\nimport { app } from '../app';\r\n\r\nexport const connectFx = app.createEffect<void, string>();\r\n\r\nexport const disconnectFx = app.createEffect<void, void>();\r\n\r\nexport const $cluster = app.createStore<Cluster>('devnet');\r\n\r\nexport const clusterPersisted = app.createEvent<any>();\r\n\r\nexport const $type = app.createStore<WalletType>(WalletType.SOLLET);\r\n\r\nexport const $connected = app.createStore<boolean>(false);\r\n\r\nexport const $wallet = app.createStore<string | null>(null);\r\n","import { forward } from 'effector';\r\nimport { ButtonClick } from 'types/effector';\r\nimport { app } from 'models/app';\r\nimport { connectFx } from 'models/wallet';\r\n\r\nexport const connectClicked = app.createEvent<ButtonClick>();\r\n\r\nforward({\r\n  from: connectClicked,\r\n  to: connectFx,\r\n});\r\n","import React, { FC } from 'react';\r\n\r\nimport { styled } from '@linaria/react';\r\nimport { useStore } from 'effector-react';\r\nimport { Link } from 'react-router-dom';\r\nimport { $connected } from 'models/wallet';\r\nimport { Button } from 'components/ui/Button';\r\nimport { connectClicked } from './model';\r\nimport { NavMenu } from './NavMenu';\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  height: 88px;\r\n  padding: 0 50px;\r\n\r\n  background: #ffffff;\r\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.05);\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n\r\n  width: 100%;\r\n  max-width: 1340px;\r\n  margin: 0 auto;\r\n`;\r\n\r\nconst Left = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst LogoLink = styled(Link)`\r\n  font-family: TT Firs Neue, sans-serif;\r\n  font-weight: 600;\r\n  font-size: 18px;\r\n  line-height: 140%;\r\n`;\r\n\r\nconst ByA = styled.a`\r\n  margin-left: 13px;\r\n\r\n  color: #8c8e99;\r\n  font-family: Titillium Web, sans-serif;\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n  line-height: 140%;\r\n`;\r\n\r\nconst Right = styled.div`\r\n  display: flex;\r\n\r\n  & > :not(:last-child) {\r\n    margin-right: 36px;\r\n  }\r\n`;\r\n\r\ninterface Props {}\r\n\r\nexport const Header: FC<Props> = () => {\r\n  const connected = useStore($connected);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Container>\r\n        <Left>\r\n          <LogoLink to=\"/\">DTF</LogoLink>\r\n          <ByA href=\"https://p2p.org\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            —{'     '}by p2p.org\r\n          </ByA>\r\n        </Left>\r\n\r\n        <Right>\r\n          {/*<NavMenu />*/}\r\n          {!connected ? (\r\n            <Button primary onClick={connectClicked}>\r\n              Connect wallet\r\n            </Button>\r\n          ) : null}\r\n        </Right>\r\n      </Container>\r\n    </Wrapper>\r\n  );\r\n};\r\n","import React, { FC, HTMLAttributes } from 'react';\r\n\r\nimport { styled } from '@linaria/react';\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  max-width: 1068px;\r\n  margin: 0 auto;\r\n`;\r\n\r\nexport const MainContainer: FC<HTMLAttributes<HTMLDivElement>> = ({\r\n  children,\r\n  style,\r\n  className,\r\n}) => {\r\n  return (\r\n    <Wrapper style={style} className={className}>\r\n      {children}\r\n    </Wrapper>\r\n  );\r\n};\r\n","import { app } from 'models/app';\r\nimport { ModalsState, ModalState } from './types';\r\n\r\nexport const $modals = app.createStore<ModalsState>([]);\r\n\r\nexport const closeModalFx = app.createEffect<\r\n  {\r\n    modalId: number;\r\n    result?: any;\r\n  },\r\n  void\r\n>();\r\n\r\nexport const closeModal = app.createEvent<{ modalId: number }>();\r\n\r\nexport const openModalFx = app.createEffect<\r\n  {\r\n    modalType: string;\r\n    props?: any;\r\n  },\r\n  Promise<unknown>\r\n>();\r\n\r\nexport const openModal = app.createEvent<ModalState>();\r\n","export const MODAL_INVEST = 'MODAL_INVEST';\r\nexport const MODAL_WITHDRAW = 'MODAL_WITHDRAW';\r\n","import { TOKENS as TOKENS_ORIGINAL } from '@solana/spl-token-registry/dist/main/lib/tokens';\r\nimport { KnownToken } from '@solana/spl-token-registry';\r\n\r\nexport const TOKENS = {\r\n  ...TOKENS_ORIGINAL,\r\n  devnet: [\r\n    {\r\n      tokenSymbol: 'SOL',\r\n      mintAddress: '8UGbGeCyvnWZQ2DL2VDxyCTsmy7dUEoJtJBr9EZxnTH4',\r\n      tokenName: 'Solana',\r\n      icon:\r\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/solana/info/logo.png',\r\n    },\r\n    {\r\n      tokenSymbol: 'FTT',\r\n      mintAddress: 'DLMTFLwUMocgy63KEMb59VBHYPvjWv399N5HFgrXsgnv',\r\n      tokenName: 'FTT',\r\n      icon:\r\n        'https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0x50D1c9771902476076eCFc8B2A83Ad6b9355a4c9/logo.png',\r\n    },\r\n    {\r\n      tokenSymbol: 'REN',\r\n      mintAddress: '4McZwrFKMo9QhXNQFKuwxhG3aHik6xhsFZBhHVaCW9CJ',\r\n      tokenName: 'REN',\r\n      icon: 'https://s2.coinmarketcap.com/static/img/coins/64x64/2539.png',\r\n    },\r\n    {\r\n      tokenSymbol: 'SRM',\r\n      mintAddress: 'J6L4Ujv82ryQgjnA2rgaFsbtPwRBJNGCQsWdWWuH1aPT',\r\n      tokenName: 'Serum',\r\n      icon:\r\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x476c5E26a75bd202a9683ffD34359C0CC15be0fF/logo.png',\r\n      website: 'https://projectserum.com',\r\n    },\r\n    {\r\n      tokenSymbol: 'SUSHI',\r\n      mintAddress: '6Cyp4H66L5JE2DnEgpYRBS27sY7rYSLPz6b31q1coUYJ',\r\n      tokenName: 'SUSHI',\r\n      icon:\r\n        'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x6B3595068778DD592e39A122f4f5a5cF09C90fE2/logo.png',\r\n    },\r\n    {\r\n      tokenSymbol: 'RAY',\r\n      mintAddress: '757dVSETUqFjmDQPAkCyiZzumjtShHTb7B8PpFFFUSib',\r\n      tokenName: 'RAY',\r\n      icon: 'https://s2.coinmarketcap.com/static/img/coins/64x64/8526.png',\r\n    },\r\n    {\r\n      tokenSymbol: 'FIDA',\r\n      mintAddress: 'FhxsBCrUZYhiUyWQkfbJQdG9Y32NXmtxFriQs7WMdtwo',\r\n      tokenName: 'Bonfida',\r\n      icon:\r\n        'https://raw.githubusercontent.com/dr497/awesome-serum-markets/02ce7c74fd2e9bd4cb55a15f735fc3ad0e7335f6/icons/fida.svg',\r\n    },\r\n    {\r\n      tokenSymbol: 'USDC',\r\n      mintAddress: 'DbMXbT2zYBNC9QbbcPtQKEZ491vXiTb4mTXmTBRor1TC',\r\n      tokenName: 'USDC',\r\n      icon:\r\n        'https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png',\r\n    },\r\n  ] as KnownToken[],\r\n};\r\n","import { styled } from '@linaria/react';\r\n\r\nexport const Column = styled.div`\r\n  display: flex;\r\n\r\n  width: 100%;\r\n\r\n  &.name {\r\n    max-width: 263px;\r\n  }\r\n\r\n  &.marketCap {\r\n    max-width: 169px;\r\n  }\r\n\r\n  &.price {\r\n    max-width: 123px;\r\n  }\r\n\r\n  &.since {\r\n    max-width: 154px;\r\n  }\r\n\r\n  &.balance {\r\n    max-width: 121px;\r\n  }\r\n`;\r\n","import React, { FC } from 'react';\r\n\r\nimport { styled } from '@linaria/react';\r\nimport { PublicKey } from '@solana/web3.js';\r\nimport { shortAddress } from 'utils/common';\r\nimport { TOKENS } from 'config/tokens';\r\nimport { Avatar } from 'components/common/Avatar';\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  min-width: 108px;\r\n\r\n  color: #000000;\r\n  font-family: Titillium Web, sans-serif;\r\n  font-size: 12px;\r\n  line-height: 140%;\r\n`;\r\n\r\nconst TokenName = styled.div`\r\n  margin-left: 12px;\r\n\r\n  font-weight: 600;\r\n`;\r\n\r\nconst TokenShareValue = styled.div`\r\n  display: inline-block;\r\n\r\n  font-weight: 400;\r\n`;\r\n\r\ninterface Props {\r\n  tokenWeight: { mintAddress: PublicKey; weight: number };\r\n}\r\n\r\nexport const TokenShare: FC<Props> = ({ tokenWeight }) => {\r\n  const tokenMeta = TOKENS.devnet.find(\r\n    (token) => token.mintAddress === tokenWeight.mintAddress.toBase58(),\r\n  );\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Avatar size={18} src={tokenMeta?.icon} />\r\n      <TokenName>\r\n        {tokenMeta?.tokenName ||\r\n          shortAddress(tokenWeight.mintAddress.toBase58())}{' '}\r\n        <TokenShareValue>{tokenWeight.weight}%</TokenShareValue>\r\n      </TokenName>\r\n    </Wrapper>\r\n  );\r\n};\r\n","import React, { FC, useMemo } from 'react';\r\n\r\nimport { styled } from '@linaria/react';\r\nimport classNames from 'classnames';\r\nimport { PublicKeyAndAccount } from '@solana/web3.js';\r\nimport { useStore } from 'effector-react';\r\nimport { Button } from 'components/ui/Button';\r\n\r\nimport { Avatar } from 'components/common/Avatar';\r\nimport { openModalFx } from 'models/modals';\r\nimport {\r\n  MODAL_INVEST,\r\n  MODAL_WITHDRAW,\r\n} from 'components/common/ModalManager/constants';\r\nimport { moneyFormat } from 'utils/common';\r\nimport { TOKENS } from 'config/tokens';\r\nimport { FUNDS } from 'config/funds';\r\nimport { $ratesMap } from 'models/rates';\r\nimport { PoolStatePopulated } from 'models/types';\r\nimport { $connected } from 'models/wallet';\r\nimport { Column } from '../common/Column';\r\nimport { TokenShare } from './TokenShare';\r\n\r\nconst TopWrapper = styled.div`\r\n  display: flex;\r\n  flex-flow: nowrap;\r\n\r\n  padding: 24px;\r\n`;\r\n\r\nconst InfoWrapper = styled.div`\r\n  margin-left: 12px;\r\n`;\r\n\r\nconst FundName = styled.h4`\r\n  margin-bottom: 4px;\r\n\r\n  color: #5887ff;\r\n  font-family: Titillium Web, sans-serif;\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n  line-height: 140%;\r\n`;\r\n\r\nconst FundDate = styled.div`\r\n  color: #a3a5ba;\r\n  font-family: Titillium Web, sans-serif;\r\n  font-size: 12px;\r\n  line-height: 140%;\r\n`;\r\n\r\nconst ColumnValue = styled(Column)`\r\n  flex-direction: column;\r\n\r\n  color: #000000;\r\n  font-family: Titillium Web, sans-serif;\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n  line-height: 140%;\r\n\r\n  &.price {\r\n    font-weight: 700;\r\n  }\r\n\r\n  &.alert {\r\n    color: #ffa631;\r\n  }\r\n\r\n  &.profit {\r\n    color: #62cf7a;\r\n  }\r\n`;\r\n\r\nconst AdditionalInfo = styled.div`\r\n  color: #a3a5ba;\r\n  font-family: Titillium Web, sans-serif;\r\n  font-size: 13px;\r\n  line-height: 140%;\r\n`;\r\n\r\nconst ColumnButtons = styled.div`\r\n  opacity: 0;\r\n\r\n  & > :not(:last-child) {\r\n    margin-right: 16px;\r\n  }\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  background: #ffffff;\r\n  box-shadow: 0 8px 8px rgba(0, 0, 0, 0.03);\r\n  border-radius: 12px;\r\n\r\n  &.isHoverable {\r\n    cursor: pointer;\r\n\r\n    transition: box-shadow 100ms cubic-bezier(0.64, 0, 0.35, 1) 0s;\r\n\r\n    &:hover {\r\n      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);\r\n\r\n      ${ColumnButtons} {\r\n        opacity: 1;\r\n\r\n        visibility: visible;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst ButtonStyled = styled(Button)`\r\n  padding: 0 16px;\r\n`;\r\n\r\nconst BottomWrapper = styled.div`\r\n  display: grid;\r\n  grid-auto-columns: 1fr max-content;\r\n  grid-auto-flow: column;\r\n\r\n  padding: 16px 24px;\r\n\r\n  border-top: 1px solid rgba(163, 165, 186, 0.2);\r\n`;\r\n\r\nconst TokenSharesRow = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\ninterface Props {\r\n  fund: PublicKeyAndAccount<PoolStatePopulated>;\r\n}\r\n\r\n// eslint-disable-next-line sonarjs/cognitive-complexity\r\nexport const FundRow: FC<Props> = ({ fund }) => {\r\n  const connected = useStore($connected);\r\n  const ratesMap = useStore($ratesMap);\r\n\r\n  const fundMarketCap = useMemo(\r\n    () =>\r\n      fund.account.data.assets.reduce((marketCap, asset) => {\r\n        if (!asset.vaultPopulated) {\r\n          console.error(\r\n            'vaultPopulated for marketCap calculation did not found:',\r\n            asset.mint.toBase58(),\r\n          );\r\n          return marketCap;\r\n        }\r\n\r\n        const tokenMeta = TOKENS.devnet.find(\r\n          (token) => token.mintAddress === asset.mint.toBase58(),\r\n        );\r\n        if (!tokenMeta) {\r\n          console.error(\r\n            'tokenMeta for marketCap calculation did not found:',\r\n            asset.mint.toBase58(),\r\n          );\r\n          return marketCap;\r\n        }\r\n\r\n        const rate = ratesMap[tokenMeta.tokenSymbol];\r\n\r\n        if (!rate) {\r\n          console.error(\r\n            'rate for marketCap calculation did not found:',\r\n            tokenMeta.tokenSymbol,\r\n          );\r\n          return marketCap;\r\n        }\r\n\r\n        return (\r\n          marketCap + asset.vaultPopulated.tokenAmount.uiAmount * rate * 1000000\r\n        );\r\n      }, 0),\r\n    [fund, ratesMap],\r\n  );\r\n\r\n  const fundPrice = useMemo(() => {\r\n    if (!fund.account.data.poolTokenMintPopulated?.supply) {\r\n      console.error(\r\n        'supply for fundPrice calculation did not found:',\r\n        fund.account.data.poolTokenMint.toBase58(),\r\n      );\r\n      return 0;\r\n    }\r\n\r\n    // TODO: BN\r\n    return (\r\n      fundMarketCap / Number(fund.account.data.poolTokenMintPopulated.supply)\r\n    );\r\n  }, [fund, fundMarketCap]);\r\n\r\n  const fundMeta = useMemo(\r\n    () =>\r\n      FUNDS.devnet.find(\r\n        (fundItem) => fundItem.address === fund.pubkey.toBase58(),\r\n      ),\r\n    [fund],\r\n  );\r\n\r\n  const tokens = useMemo(() => {\r\n    const { assets, fundState } = fund.account.data;\r\n\r\n    const assetWeights = fundState?.assetWeights;\r\n\r\n    if (!assetWeights) {\r\n      return [];\r\n    }\r\n\r\n    return assetWeights\r\n      .map((weight, index) => ({\r\n        mintAddress: assets[index].mint,\r\n        weight: weight / 10,\r\n      }))\r\n      .sort((a, b) => b.weight - a.weight);\r\n  }, [fund]);\r\n\r\n  const handleOpenInvestModalClick = () => {\r\n    openModalFx({\r\n      modalType: MODAL_INVEST,\r\n      props: { fund },\r\n    });\r\n  };\r\n\r\n  const handleOpenWithdrawModalClick = (\r\n    e: React.MouseEvent<HTMLButtonElement>,\r\n  ) => {\r\n    e.stopPropagation();\r\n\r\n    openModalFx({\r\n      modalType: MODAL_WITHDRAW,\r\n      props: { fund },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Wrapper\r\n      onClick={connected ? handleOpenInvestModalClick : undefined}\r\n      className={classNames({ isHoverable: connected })}\r\n    >\r\n      <TopWrapper>\r\n        <Column className={classNames({ name: true })}>\r\n          <Avatar src={fundMeta?.icon} />\r\n          <InfoWrapper>\r\n            {/* TODO: original name*/}\r\n            <FundName>\r\n              {fundMeta\r\n                ? `${fundMeta.fundName} (${fundMeta.fundSymbol})`\r\n                : fund.account.data.name}\r\n            </FundName>\r\n            <FundDate>Inception date: Feb 26, 2021</FundDate>\r\n          </InfoWrapper>\r\n        </Column>\r\n        <ColumnValue\r\n          title={String(fundMarketCap || '')}\r\n          className={classNames({ marketCap: true })}\r\n        >\r\n          {moneyFormat(fundMarketCap)}\r\n        </ColumnValue>\r\n        <ColumnValue\r\n          title={String(fundPrice || '')}\r\n          className={classNames({ price: true })}\r\n        >\r\n          {moneyFormat(fundPrice)}\r\n        </ColumnValue>\r\n        <ColumnValue className={classNames({ since: true, profit: true })}>\r\n          ...\r\n        </ColumnValue>\r\n        {connected ? (\r\n          <>\r\n            {/* <ColumnValue className={classNames({ balance: true })}>\r\n              <div>48.00 {fundMeta?.fundSymbol}</div>\r\n              <AdditionalInfo>Valuation: $5952</AdditionalInfo>\r\n            </ColumnValue> */}\r\n            <ColumnValue className={classNames({ balance: true })}>\r\n              <div>...</div>\r\n            </ColumnValue>\r\n\r\n            <ColumnButtons>\r\n              <ButtonStyled\r\n                primary\r\n                disabled={false}\r\n                onClick={handleOpenWithdrawModalClick}\r\n              >\r\n                Withdraw\r\n              </ButtonStyled>\r\n              <ButtonStyled primary>+ Invest</ButtonStyled>\r\n            </ColumnButtons>\r\n          </>\r\n        ) : null}\r\n      </TopWrapper>\r\n      <BottomWrapper>\r\n        <TokenSharesRow>\r\n          {tokens.map((tokenWeight) => (\r\n            <TokenShare\r\n              key={tokenWeight.mintAddress.toBase58()}\r\n              tokenWeight={tokenWeight}\r\n            />\r\n          ))}\r\n        </TokenSharesRow>\r\n      </BottomWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/arrow-triangle-icon.5522e2c8.svg\";","export default __webpack_public_path__ + \"static/media/checkmark-icon.074d148d.svg\";","import React from 'react';\r\n\r\nimport isPropValid from '@emotion/is-prop-valid';\r\nimport { CSSProperties } from '@linaria/core';\r\n\r\nimport { SvgIconType } from 'types/custom';\r\nimport arrowTriangle from './assets/arrow-triangle-icon.svg';\r\nimport checkmark from './assets/checkmark-icon.svg';\r\n\r\n// TODO: check thats wrong with type\r\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-ignore\r\nconst iconsMap = new Map<string, SvgIconType>([\r\n  ['arrow-triangle', arrowTriangle],\r\n  ['checkmark', checkmark],\r\n]);\r\n\r\nexport interface IconType {\r\n  name: string;\r\n  size?: string | number;\r\n  height?: string | number;\r\n  width?: string | number;\r\n  style?: CSSProperties;\r\n  className?: string;\r\n}\r\n\r\nexport const Icon: React.FunctionComponent<IconType> = ({\r\n  name,\r\n  size,\r\n  height,\r\n  width,\r\n  ...props\r\n}) => {\r\n  const validProps: {\r\n    [prop: string]: any;\r\n  } = {};\r\n\r\n  Object.keys(props).forEach((prop) => {\r\n    if (isPropValid(prop)) {\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n      // @ts-ignore\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n      validProps[prop] = props[prop];\r\n    }\r\n  });\r\n\r\n  const icon = iconsMap.get(name);\r\n\r\n  if (!icon) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <svg\r\n      {...validProps}\r\n      viewBox={icon.viewBox}\r\n      height={size || height}\r\n      width={size || width}\r\n    >\r\n      <use xlinkHref={`#${icon.id}`} />\r\n    </svg>\r\n  );\r\n};\r\n","import React, { FunctionComponent, useEffect, useRef, useState } from 'react';\r\n\r\nimport { styled } from '@linaria/react';\r\nimport { Cluster } from '@solana/web3.js';\r\nimport classNames from 'classnames';\r\n\r\nimport { Icon } from 'components/ui/Icon';\r\n\r\nimport { ItemRow } from './ItemRow';\r\n\r\nconst Wrapper = styled.div`\r\n  position: relative;\r\n\r\n  background: #f6f6f8;\r\n  border-radius: 12px;\r\n`;\r\n\r\nconst SelectorWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  max-width: 153px;\r\n  margin: 4px;\r\n\r\n  cursor: pointer;\r\n\r\n  &.isOpen,\r\n  &:hover {\r\n  }\r\n`;\r\n\r\nconst ArrowWrapper = styled.div`\r\n  margin-right: 4px;\r\n`;\r\n\r\nconst ArrowIcon = styled(Icon)`\r\n  width: 16px;\r\n  height: 16px;\r\n\r\n  color: #a3a5ba;\r\n`;\r\n\r\nconst DropDownList = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  z-index: 1;\r\n\r\n  min-width: 204px;\r\n  margin-top: 8px;\r\n  padding: 8px;\r\n\r\n  background: #fff;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\r\n`;\r\n\r\nexport const Selector: FunctionComponent = ({ children }) => {\r\n  const selectorRef = useRef<HTMLDivElement>(null);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const handleAwayClick = (e: MouseEvent) => {\r\n    if (!selectorRef.current?.contains(e.target as HTMLDivElement)) {\r\n      setIsOpen(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('click', handleAwayClick);\r\n\r\n    return () => {\r\n      window.removeEventListener('click', handleAwayClick);\r\n    };\r\n  }, []);\r\n\r\n  const handleSelectorClick = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n\r\n  const handleItemClick = (newCluster: Cluster) => {\r\n    setIsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Wrapper ref={selectorRef}>\r\n      <SelectorWrapper\r\n        onClick={handleSelectorClick}\r\n        className={classNames({ isOpen })}\r\n      >\r\n        {children}\r\n        <ArrowWrapper>\r\n          <ArrowIcon name=\"arrow-triangle\" />\r\n        </ArrowWrapper>\r\n      </SelectorWrapper>\r\n      {isOpen ? (\r\n        <DropDownList>\r\n          {/*<ItemRow*/}\r\n          {/*  key={itemCluster}*/}\r\n          {/*  isSelected={cluster === itemCluster}*/}\r\n          {/*  cluster={itemCluster}*/}\r\n          {/*  onItemClick={handleItemClick}*/}\r\n          {/*>*/}\r\n          {/*  {itemCluster}*/}\r\n          {/*</ItemRow>*/}\r\n        </DropDownList>\r\n      ) : undefined}\r\n    </Wrapper>\r\n  );\r\n};\r\n","import React, { FC, HTMLAttributes } from 'react';\r\n\r\nimport { styled } from '@linaria/react';\r\nimport classNames from 'classnames';\r\nimport { useStore } from 'effector-react';\r\nimport { $connected } from 'models/wallet';\r\nimport { $funds } from 'models/funds';\r\nimport { FundRow } from './FundRow';\r\nimport { Column } from './common/Column';\r\nimport { Selector } from './Selector';\r\n\r\nconst Wrapper = styled.div``;\r\n\r\nconst Title = styled.div`\r\n  margin-bottom: 38px;\r\n\r\n  color: #000000;\r\n  font-family: Titillium Web, sans-serif;\r\n  font-weight: 600;\r\n  font-size: 24px;\r\n  line-height: 100%;\r\n`;\r\n\r\nconst ColumnsHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  height: 36px;\r\n  padding: 0 26px;\r\n\r\n  background: #f6f6f8;\r\n  border-radius: 12px;\r\n`;\r\n\r\nconst ColumnName = styled.div`\r\n  color: #a3a5ba;\r\n  font-family: Titillium Web, sans-serif;\r\n  font-weight: 600;\r\n  font-size: 13px;\r\n  line-height: 140%;\r\n\r\n  &.since {\r\n    color: #000000;\r\n\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst FundList = styled.div`\r\n  display: grid;\r\n  grid-auto-flow: row;\r\n  grid-gap: 24px;\r\n\r\n  margin-top: 20px;\r\n`;\r\n\r\nexport const Funds: FC<HTMLAttributes<HTMLDivElement>> = ({\r\n  style,\r\n  className,\r\n}) => {\r\n  const connected = useStore($connected);\r\n  const funds = useStore($funds);\r\n\r\n  return (\r\n    <Wrapper style={style} className={className}>\r\n      <Title>DTFs</Title>\r\n      <ColumnsHeader>\r\n        <Column className={classNames({ name: true })}>\r\n          <ColumnName>Name</ColumnName>\r\n        </Column>\r\n        <Column className={classNames({ marketCap: true })}>\r\n          <ColumnName>Market Cap</ColumnName>\r\n        </Column>\r\n        <Column className={classNames({ price: true })}>\r\n          <ColumnName>Price</ColumnName>\r\n        </Column>\r\n        <Column className={classNames({ since: true })}>\r\n          <ColumnName className={classNames({ since: true })}>\r\n            <Selector>Since inception</Selector>\r\n          </ColumnName>\r\n        </Column>\r\n        {connected ? (\r\n          <Column className={classNames({ balance: true })}>\r\n            <ColumnName>Balance</ColumnName>\r\n          </Column>\r\n        ) : null}\r\n      </ColumnsHeader>\r\n      <FundList>\r\n        {funds.map((fund) => (\r\n          <FundRow key={fund.pubkey.toBase58()} fund={fund} />\r\n        ))}\r\n      </FundList>\r\n    </Wrapper>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { styled } from '@linaria/react';\r\nimport { Header } from 'components/common/Header';\r\nimport { MainContainer } from 'components/common/MainContainer';\r\nimport { Funds } from '../../components/pages/home/Funds';\r\n\r\nconst Wrapper = styled.div`\r\n  min-height: 100%;\r\n`;\r\n\r\nconst Container = styled(MainContainer)`\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  margin: 100px auto;\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  color: #000000;\r\n  font-family: Titillium Web, sans-serif;\r\n  font-weight: 600;\r\n  font-size: 62px;\r\n  line-height: 120%;\r\n`;\r\n\r\nconst Description = styled.div`\r\n  margin-top: 12px;\r\n\r\n  color: #a3a5ba;\r\n  font-family: Titillium Web, sans-serif;\r\n  font-weight: 600;\r\n  font-size: 20px;\r\n  line-height: 120%;\r\n\r\n  text-align: center;\r\n`;\r\n\r\nconst FundsStyled = styled(Funds)`\r\n  margin-top: 85px;\r\n`;\r\n\r\nexport const Home = () => {\r\n  return (\r\n    <Wrapper>\r\n      <Header />\r\n      <Container>\r\n        <Title>Non-custodial DEX Traded Funds(DTFs)</Title>\r\n        <Description>Build on top of Solana and Serum</Description>\r\n        <FundsStyled />\r\n      </Container>\r\n    </Wrapper>\r\n  );\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport { Redirect } from 'react-router';\r\nimport { renderRoutes, RouteConfig } from 'react-router-config';\r\n\r\nimport { useStore } from 'effector-react';\r\n\r\nimport { Home } from 'pages/home';\r\n// import { NotFound } from 'pages/notFound';\r\nimport { $connected } from 'models/wallet';\r\n\r\ntype RouteConfigCustom = RouteConfig & { needAuth?: boolean };\r\n\r\nexport const makeRoutes = (isAuth: boolean): RouteConfigCustom[] =>\r\n  ([\r\n    {\r\n      path: '/',\r\n      exact: true,\r\n      component: Home,\r\n    },\r\n    {\r\n      path: '*',\r\n      component: () => <Redirect to=\"/\" />,\r\n    },\r\n    // {\r\n    //   path: '*',\r\n    //   component: NotFound,\r\n    // },\r\n  ] as RouteConfigCustom[]).map((route) => {\r\n    if (route.needAuth && route.needAuth !== isAuth) {\r\n      route.component = () => <Redirect to=\"/\" />;\r\n      return route;\r\n    }\r\n\r\n    return route;\r\n  });\r\n\r\nexport const Pages = () => {\r\n  // TODO: Cannot update a component (`Pages`) while rendering a different component\r\n  const connected = useStore($connected);\r\n\r\n  return useMemo(() => renderRoutes(makeRoutes(connected)), [connected]);\r\n};\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, {\r\n  createRef,\r\n  FC,\r\n  lazy,\r\n  LazyExoticComponent,\r\n  RefObject,\r\n  Suspense,\r\n  useState,\r\n} from 'react';\r\n\r\nimport { styled } from '@linaria/react';\r\nimport { last } from 'ramda';\r\nimport { useStore } from 'effector-react';\r\nimport { ModalComponentType, ModalState } from 'models/modals/types';\r\nimport { $modals, closeModalFx } from 'models/modals';\r\nimport { MODAL_INVEST, MODAL_WITHDRAW } from './constants';\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 30;\r\n\r\n  width: 100vw;\r\n  height: 100vh;\r\n`;\r\n\r\nconst ModalContainer = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  z-index: 1;\r\n\r\n  overflow-y: auto;\r\n  overscroll-behavior: none;\r\n\r\n  /* Above background */\r\n  &:last-child {\r\n    z-index: 2;\r\n  }\r\n`;\r\n\r\nconst ModalWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 100%;\r\n  padding: 10px 0;\r\n`;\r\n\r\nconst ModalBackground = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  z-index: 2;\r\n\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n\r\n  user-select: none;\r\n`;\r\n\r\nconst modalsMap = new Map<string, LazyExoticComponent<any>>([\r\n  [MODAL_INVEST, lazy(() => import('components/modals/Invest'))],\r\n  [MODAL_WITHDRAW, lazy(() => import('components/modals/Withdraw'))],\r\n]);\r\n\r\nexport const ModalManager: FC = () => {\r\n  const [modalsRefs, setModalsRefs] = useState<{\r\n    [modalId: string]: RefObject<ModalComponentType>;\r\n  }>({});\r\n  const modals = useStore($modals);\r\n\r\n  const closeTopModal = async () => {\r\n    const modal = last(modals);\r\n    if (!modal) {\r\n      return;\r\n    }\r\n\r\n    const { modalId } = modal;\r\n\r\n    const modalRef = modalsRefs[modalId];\r\n    if (modalRef.current?.canClose && !(await modalRef.current.canClose())) {\r\n      return;\r\n    }\r\n\r\n    closeModalFx({ modalId });\r\n  };\r\n\r\n  const handleWrapperClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n    // handle click only on element\r\n    if (e.target !== e.currentTarget) {\r\n      return;\r\n    }\r\n\r\n    closeTopModal();\r\n  };\r\n\r\n  const getReadyDialogs = () => {\r\n    const dialogs: (ModalState & {\r\n      ModalComponent: LazyExoticComponent<any>;\r\n    })[] = [];\r\n\r\n    for (const { modalType, modalId, props } of modals) {\r\n      const ModalComponent = modalsMap.get(modalType);\r\n      if (ModalComponent) {\r\n        dialogs.push({\r\n          modalType,\r\n          modalId,\r\n          props,\r\n          ModalComponent,\r\n        });\r\n      }\r\n    }\r\n\r\n    return dialogs;\r\n  };\r\n\r\n  const dialogsInfo = getReadyDialogs();\r\n\r\n  const dialogs = dialogsInfo.map(({ modalId, props, ModalComponent }) => {\r\n    let modalRef = modalsRefs[modalId];\r\n\r\n    if (!modalRef) {\r\n      modalRef = createRef();\r\n      setModalsRefs((state) => ({\r\n        ...state,\r\n        [modalId]: modalRef,\r\n      }));\r\n    }\r\n\r\n    return (\r\n      <Suspense fallback={null} key={modalId}>\r\n        <ModalContainer>\r\n          <ModalWrapper onClick={handleWrapperClick}>\r\n            <ModalComponent\r\n              {...props}\r\n              modalId={modalId}\r\n              modalRef={modalRef}\r\n              close={(result: any) => closeModalFx({ modalId, result })}\r\n            />\r\n          </ModalWrapper>\r\n        </ModalContainer>\r\n      </Suspense>\r\n    );\r\n  });\r\n\r\n  if (dialogs.length > 0) {\r\n    return (\r\n      <Wrapper>\r\n        <ModalBackground />\r\n        {dialogs}\r\n      </Wrapper>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n","import React from 'react';\r\nimport { Router } from 'react-router';\r\nimport { useGate } from 'effector-react';\r\n\r\nimport { AppGate } from 'models/app';\r\nimport { history } from 'lib/routing';\r\nimport { Pages } from './routes';\r\nimport { ModalManager } from './components/common/ModalManager';\r\n\r\nexport const App: React.FC = () => {\r\n  useGate(AppGate);\r\n\r\n  return (\r\n    <>\r\n      <Router history={history}>\r\n        <Pages />\r\n      </Router>\r\n      <ModalManager />\r\n    </>\r\n  );\r\n};\r\n","import { app } from './index';\r\n\r\napp.onCreateEffect((newEffect) => {\r\n  newEffect.failData.watch((payload) => console.error(payload));\r\n});\r\n","import * as WalletAPI from 'api/wallet';\r\nimport { WalletEvent } from 'api/wallet/Wallet';\r\n\r\nimport { getParsedTokenAccountsByOwnerFx } from '../connection';\r\nimport { findPoolsFx } from '../pools';\r\nimport {\r\n  $cluster,\r\n  $connected,\r\n  $type,\r\n  $wallet,\r\n  connectFx,\r\n  disconnectFx,\r\n} from '.';\r\n\r\n$connected.on(connectFx.done, () => true).on(disconnectFx, () => false);\r\n\r\n$wallet.on(connectFx.doneData, (_, wallet) => wallet);\r\n\r\n$connected.watch((connected) => {\r\n  if (connected) {\r\n    getParsedTokenAccountsByOwnerFx();\r\n    findPoolsFx();\r\n  }\r\n});\r\n\r\nconnectFx.use(async () => {\r\n  const cluster = $cluster.getState();\r\n  const type = $type.getState();\r\n  const wallet = await WalletAPI.connect(cluster, type);\r\n\r\n  wallet.on(WalletEvent.DISCONNECT, () => {\r\n    disconnectFx();\r\n    console.error('Wallet disconnected');\r\n  });\r\n\r\n  wallet.on(WalletEvent.CONFIRMED, ({ transactionSignature }) =>\r\n    console.info(`Confirmed: ${transactionSignature}`),\r\n  );\r\n\r\n  console.info('Wallet connected');\r\n\r\n  return wallet.pubkey.toBase58();\r\n});\r\n\r\ndisconnectFx.use(() => {\r\n  WalletAPI.disconnect();\r\n  console.error('Wallet disconnected');\r\n});\r\n","import { PublicKey } from '@solana/web3.js';\r\nimport { getConnection } from 'api/connection';\r\nimport { getWallet } from 'api/wallet';\r\nimport { TOKEN_PROGRAM_ID } from 'config';\r\nimport { getParsedTokenAccountsByOwnerFx } from '..';\r\nimport { TokenAccountType } from '../../types';\r\n\r\ngetParsedTokenAccountsByOwnerFx.use(async () => {\r\n  const connection = getConnection();\r\n  const wallet = getWallet().pubkey;\r\n\r\n  const result = await connection.getParsedTokenAccountsByOwner(wallet, {\r\n    programId: TOKEN_PROGRAM_ID,\r\n  });\r\n\r\n  return result.value.map((account) => ({\r\n    pubkey: account.pubkey,\r\n    account: {\r\n      executable: account.account.executable,\r\n      owner: account.account.owner,\r\n      lamports: account.account.lamports,\r\n      data: account.account.data.parsed.info,\r\n    },\r\n  })) as TokenAccountType[];\r\n});\r\n","import { $tokenAccounts, getParsedTokenAccountsByOwnerFx } from './index';\r\n\r\nimport './effects';\r\n\r\n$tokenAccounts.on(\r\n  getParsedTokenAccountsByOwnerFx.doneData,\r\n  (_, tokenAccounts) => {\r\n    if (tokenAccounts.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    console.log(333, tokenAccounts);\r\n\r\n    return tokenAccounts.sort(\r\n      (a, b) =>\r\n        b.account.data.tokenAmount.uiAmount -\r\n        a.account.data.tokenAmount.uiAmount,\r\n    );\r\n  },\r\n);\r\n","import { $funds, findFundFx } from '.';\r\n\r\nimport './effects';\r\nimport { PublicKey } from '@solana/web3.js';\r\nimport { AppGate } from '../app';\r\n\r\n$funds.on(findFundFx.doneData, (state, newFund) => [\r\n  ...state.filter((find) => !find.pubkey.equals(newFund.pubkey)),\r\n  newFund,\r\n]);\r\n\r\n// TODO: temp\r\nconst fundAddress = new PublicKey(\r\n  't72redTRJkPtUmTWWvPyjnkFKGVrHakv3DBQTheY4oD',\r\n);\r\nAppGate.open.watch(() => {\r\n  findFundFx(fundAddress);\r\n});\r\n","import { $pools, findPoolsFx } from '.';\r\n\r\nimport './effects';\r\n\r\n$pools.on(findPoolsFx.doneData, (_, newPools) => newPools);\r\n","import { forward } from 'effector';\r\nimport { TOKENS } from 'config/tokens';\r\nimport { cryptoCompareApiKey } from 'config';\r\nimport { AppGate } from '../app';\r\nimport { $ratesMap, fetchRatesFx } from './index';\r\n\r\nconst CRYPTO_COMPARE_API_URL = 'https://min-api.cryptocompare.com/data';\r\n\r\n$ratesMap.on(fetchRatesFx.doneData, (state, newRates) => {\r\n  const newState = { ...state };\r\n  newRates.map((rate) => (newState[rate.symbol] = rate.rate));\r\n  return newState;\r\n});\r\n\r\nfetchRatesFx.use(async () => {\r\n  const symbols = TOKENS.devnet.map((token) => token.tokenSymbol);\r\n\r\n  try {\r\n    const res = await fetch(\r\n      `${CRYPTO_COMPARE_API_URL}/pricemulti?api_key=${cryptoCompareApiKey}&fsyms=${symbols.join(\r\n        ',',\r\n      )}&tsyms=USD`,\r\n    );\r\n\r\n    if (!res.ok) {\r\n      throw new Error('Something wrong');\r\n    }\r\n\r\n    const result = (await res.json()) as RatesCryptoCompareResponse;\r\n\r\n    const rates: FetchRates[] = [];\r\n\r\n    symbols.forEach((symbol) => {\r\n      if (result[symbol]) {\r\n        rates.push({ symbol, rate: result[symbol].USD });\r\n      }\r\n    });\r\n\r\n    return rates;\r\n  } catch (error) {\r\n    console.error(`Can't get rates for tokens:`, error);\r\n    throw error;\r\n  }\r\n});\r\n\r\n// TODO: check it is a right place?\r\nforward({\r\n  from: AppGate.open,\r\n  to: fetchRatesFx,\r\n});\r\n","import { closeModal, $modals, closeModalFx, openModalFx, openModal } from '.';\r\n\r\nconst promises = new Map();\r\nlet modalId = 0;\r\n\r\ncloseModalFx.use(({ modalId, result }): void => {\r\n  if (!modalId) {\r\n    throw new Error('Trying to hide modal without modalId');\r\n  }\r\n\r\n  const dialogInfo = promises.get(modalId);\r\n\r\n  if (dialogInfo) {\r\n    dialogInfo.resolve(result);\r\n    promises.delete(modalId);\r\n  }\r\n\r\n  closeModal({ modalId });\r\n});\r\n\r\nopenModalFx.use(\r\n  ({ modalType, props }): Promise<unknown> => {\r\n    const modals = $modals.getState();\r\n\r\n    if (modals.some((modal) => modal.modalType === modalType)) {\r\n      // TODO: custom type of Error\r\n      throw new Error(`Dublicate of modal ${modalType}`);\r\n    }\r\n\r\n    modalId = ++modalId;\r\n\r\n    openModal({ modalType, modalId, props });\r\n\r\n    const promise = new Promise((resolve) => {\r\n      promises.set(modalId, {\r\n        modalId,\r\n        resolve,\r\n      });\r\n    });\r\n\r\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n    // @ts-ignore\r\n    promise.modalId = modalId;\r\n\r\n    return promise;\r\n  },\r\n);\r\n\r\n$modals\r\n  .on(closeModal, (state, payload) =>\r\n    state.filter((dialog) => dialog.modalId !== payload.modalId),\r\n  )\r\n  .on(openModal, (state, payload) => state.concat(payload));\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { createInspector } from 'effector-logger/inspector';\r\n\r\nimport { App } from './App';\r\nimport { reportWebVitals } from './reportWebVitals';\r\nimport './models/init';\r\nimport { css } from '@linaria/core';\r\nimport { ress } from './styles/ress';\r\nimport { fonts } from 'styles/fonts';\r\n\r\ncreateInspector();\r\n\r\nexport const globals = css`\r\n  :global() {\r\n    ${ress}\r\n    ${fonts}\r\n    html,\r\n    body,\r\n    #root {\r\n      min-height: 0;\r\n    }\r\n\r\n    body {\r\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\r\n        'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\r\n        'Helvetica Neue', sans-serif;\r\n      font-feature-settings: 'kern';\r\n      text-rendering: optimizeLegibility;\r\n      -webkit-font-smoothing: antialiased;\r\n\r\n      background: #fbfbfd;\r\n    }\r\n\r\n    #root {\r\n      padding-bottom: 50px;\r\n    }\r\n\r\n    a {\r\n      text-decoration: none;\r\n      color: inherit;\r\n    }\r\n  }\r\n`;\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.querySelector('#root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nexport const reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n","import {\r\n  Cluster,\r\n  clusterApiUrl,\r\n  Commitment,\r\n  Connection,\r\n  SignatureResult,\r\n} from '@solana/web3.js';\r\nimport { identity, memoizeWith } from 'ramda';\r\n\r\nimport { defaultCommitment } from 'config';\r\n\r\nimport { retryableProxy } from './utils/retryableProxy';\r\n\r\n// The default time to wait when confirming a transaction.\r\nexport const DEFAULT_COMMITMENT: Commitment = defaultCommitment;\r\n\r\nlet currentCluster: Cluster;\r\n\r\n// Since connection objects include state, we memoise them here per network\r\nconst createConnection = memoizeWith<(network: string) => Connection>(\r\n  identity,\r\n  (network) => {\r\n    const connection = new Connection(network, DEFAULT_COMMITMENT);\r\n\r\n    // Due to an issue with the solana back-end relating to CORS headers on 429 responses\r\n    // Rate-limiting responses are not retried correctly. Adding this proxy fixes this.\r\n    const proxiedFunctions = [\r\n      'getBalance',\r\n      'getAccountInfo',\r\n      'getParsedAccountInfo',\r\n      'getParsedProgramAccounts',\r\n      'getParsedTokenAccountsByOwner',\r\n      'getRecentBlockhash',\r\n      'sendTransaction',\r\n      'sendRawTransaction',\r\n      'requestAirdrop',\r\n    ];\r\n    proxiedFunctions.forEach((fnName) => {\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n      // @ts-ignore\r\n      connection[fnName] = retryableProxy(connection[fnName]);\r\n    });\r\n\r\n    return connection;\r\n  },\r\n);\r\n\r\nexport const getNetwork = (cluster: Cluster): string => {\r\n  if (cluster === 'mainnet-beta') {\r\n    return 'https://solana-api.projectserum.com/';\r\n  }\r\n\r\n  return clusterApiUrl(cluster);\r\n};\r\n\r\nexport const getConnection = (cluster?: Cluster): Connection => {\r\n  if (cluster) {\r\n    currentCluster = cluster;\r\n  }\r\n\r\n  const selectedCluster = cluster || currentCluster;\r\n\r\n  const network = getNetwork(selectedCluster);\r\n  return createConnection(network);\r\n};\r\n\r\nexport const confirmTransaction = (\r\n  signature: string,\r\n  commitment?: Commitment,\r\n): Promise<SignatureResult> => {\r\n  const connection = getConnection();\r\n  const confirmViaSocket = new Promise<SignatureResult>((resolve) =>\r\n    connection.onSignature(signature, (signatureResult) => {\r\n      console.log('Confirmation via socket:', signatureResult);\r\n      resolve(signatureResult);\r\n    }),\r\n  );\r\n\r\n  const confirmViaHttp = connection\r\n    .confirmTransaction(signature, commitment || DEFAULT_COMMITMENT)\r\n    .then((signatureResult) => {\r\n      console.log('Confirmation via http:', signatureResult);\r\n      return signatureResult.value;\r\n    });\r\n\r\n  return Promise.race([confirmViaHttp, confirmViaSocket]);\r\n};\r\n","import { mergeLeft } from 'ramda';\r\n\r\nimport { sleep } from 'utils/common';\r\n\r\ninterface RetryOptions {\r\n  count: number;\r\n  intervalMS: number;\r\n  backoutMultiplier: number;\r\n}\r\n\r\nconst defaultRetryOptions: RetryOptions = {\r\n  // max number of retries\r\n  count: 10,\r\n  intervalMS: 200,\r\n  // every retry, multiply the interval by this amount\r\n  backoutMultiplier: 1.5,\r\n};\r\n\r\ninterface GenericAsyncFunction<U, R> {\r\n  (...args: Array<U>): Promise<R>;\r\n}\r\n\r\n/**\r\n * Creates a Proxy wraps the function in a retry function.\r\n * This should be only used if the function is idempotent, i.e. retrying should\r\n * return the same value and have no side-effects.\r\n *\r\n * @param fn\r\n * @param retryOptions\r\n */\r\nexport const retryableProxy = <U, R>(\r\n  fn: GenericAsyncFunction<U, R>,\r\n  retryOptions: Partial<RetryOptions> = defaultRetryOptions,\r\n): GenericAsyncFunction<U, R> => {\r\n  // combine the passed in options with default options\r\n  const options = mergeLeft(retryOptions, defaultRetryOptions);\r\n\r\n  const retryReducer = <T>(\r\n    target: GenericAsyncFunction<U, T>,\r\n    thisArg: unknown,\r\n    argArray: Array<U>,\r\n  ) => async (\r\n    previousValue: Promise<T>,\r\n    currentValue: Promise<T>,\r\n    currentIndex: number,\r\n  ): Promise<T> => {\r\n    // eslint-disable-next-line unicorn/consistent-function-scoping\r\n    const call = async () => target.apply(thisArg, argArray);\r\n\r\n    // if it hasn't been called yet, call the function\r\n    if (!previousValue) {\r\n      return call();\r\n    }\r\n\r\n    //  if it has been called, and failed, catch the error, wait and retry\r\n    return previousValue.catch((error) => {\r\n      const sleepMs =\r\n        options.intervalMS * options.backoutMultiplier ** currentIndex;\r\n      console.error(error);\r\n      console.log(\r\n        `Retrying after ${sleepMs}ms. (Retried ${currentIndex} times)`,\r\n      );\r\n\r\n      return sleep(sleepMs).then(call);\r\n    });\r\n  };\r\n\r\n  return new Proxy(fn, {\r\n    // trap the \"apply\" call to the proxied function,\r\n    // in other words, trap the function call itself\r\n    apply: (target, thisArg, argArray) => {\r\n      // reduce over the maximum number of retries.\r\n      // if any of them pass, the code will short-circuit and skip the rest\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/no-unsafe-assignment,@typescript-eslint/no-unsafe-call,@typescript-eslint/no-unsafe-member-access\r\n      return [...new Array(options.count)]\r\n        .reduce(retryReducer(target, thisArg, argArray))\r\n        .catch((error: Error) => {\r\n          console.error('No more retries, throwing.');\r\n          throw error;\r\n        });\r\n    },\r\n  });\r\n};\r\n","import { PublicKey, Transaction } from '@solana/web3.js';\r\nimport EventEmitter from 'eventemitter3';\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum WalletEvent {\r\n  CONNECT = 'connect',\r\n  DISCONNECT = 'disconnect',\r\n  SIGNED = 'signed',\r\n  CONFIRMED = 'confirmed',\r\n}\r\n\r\n/**\r\n * Abstract wallet implementation. Any wallet connection,\r\n * e.g. browser extension, hardware wallet, web wallet etc,\r\n * is a separate implementation of this.\r\n */\r\nexport abstract class Wallet extends EventEmitter {\r\n  private network: string;\r\n\r\n  protected constructor(network: string) {\r\n    super();\r\n    this.network = network;\r\n  }\r\n\r\n  abstract get pubkey(): PublicKey;\r\n\r\n  abstract disconnect(): void;\r\n\r\n  /**\r\n   * Sign the transaction, and emit a \"signed\" event\r\n   * @param transaction\r\n   */\r\n  async sign(transaction: Transaction): Promise<Transaction> {\r\n    const signedTransaction = await this.signTransaction(transaction);\r\n    this.emit(WalletEvent.SIGNED, { transaction: signedTransaction });\r\n\r\n    return signedTransaction;\r\n  }\r\n\r\n  /**\r\n   * Delegate to the underlying implementation to sign the transaction\r\n   * @param transaction\r\n   * @protected\r\n   */\r\n  protected abstract signTransaction(transaction: Transaction): Promise<Transaction>;\r\n}\r\n","import { PublicKey } from '@solana/web3.js';\r\nimport { app } from '../app';\r\nimport { FundType } from '../types';\r\n\r\n/**\r\n * Stores\r\n */\r\nexport const $funds = app.createStore<FundType[]>([]);\r\n\r\n/**\r\n * Effects\r\n */\r\nexport const findFundFx = app.createEffect<PublicKey, FundType>();\r\n\r\nexport const findFundsFx = app.createEffect<void, FundType[]>();\r\n","export const sleep: (ms: number) => Promise<void> = (ms: number) =>\r\n  new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\nexport const shortAddress = (address: string) => {\r\n  return `${address.slice(0, 4)}…${address.slice(-4)}`;\r\n};\r\n\r\nexport const moneyFormat = (amount: number) => {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: 'USD',\r\n  }).format(amount);\r\n};\r\n","import { app } from 'models/app';\r\nimport { TokenAccountType } from '../types';\r\n\r\nexport const $tokenAccounts = app.createStore<TokenAccountType[]>([]);\r\n\r\nexport const getParsedTokenAccountsByOwnerFx = app.createEffect<\r\n  void,\r\n  TokenAccountType[]\r\n>();\r\n","import { app } from 'models/app';\r\nimport { TokenSwapPopulated } from 'models/types';\r\n\r\nexport const $pools = app.createStore<TokenSwapPopulated[]>([]);\r\n\r\nexport const findPoolsFx = app.createEffect<void, TokenSwapPopulated[]>();\r\n","import {\r\n  Account,\r\n  Cluster,\r\n  Commitment,\r\n  Connection,\r\n  PublicKey,\r\n  Transaction,\r\n  TransactionInstruction,\r\n  TransactionInstructionCtorFields,\r\n} from '@solana/web3.js';\r\n\r\nimport nacl from 'tweetnacl';\r\nimport { postTransactionSleepMS } from 'config';\r\nimport { sleep } from 'utils/common';\r\n\r\nimport {\r\n  confirmTransaction,\r\n  DEFAULT_COMMITMENT,\r\n  getConnection,\r\n  getNetwork,\r\n} from '../connection';\r\nimport { SolletWallet } from './SolletWallet';\r\nimport { Wallet, WalletEvent } from './Wallet';\r\n\r\nconst POST_TRANSACTION_SLEEP_MS = postTransactionSleepMS || 500;\r\n\r\n/**\r\n * API for connecting to and interacting with a wallet\r\n */\r\n\r\n// singleton wallet for the app.\r\n// A user can be connected to only one wallet at a time.\r\nlet wallet: Wallet | null;\r\nlet connection: Connection | null;\r\n\r\nconst ERROR_CONNECT_FIRST = 'Connect first';\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport enum WalletType {\r\n  MANUAL,\r\n  SOLLET,\r\n  BONFIDA,\r\n  LOCAL,\r\n}\r\n\r\nconst createWallet = (type: WalletType, cluster: Cluster): Wallet => {\r\n  const network = getNetwork(cluster);\r\n  switch (type) {\r\n    case WalletType.SOLLET:\r\n      return new SolletWallet(network);\r\n    case WalletType.BONFIDA:\r\n      return new SolletWallet(network, 'https://bonfida.com/wallet');\r\n    default:\r\n      return new SolletWallet(network);\r\n  }\r\n};\r\n\r\nexport const connect = async (\r\n  cluster: Cluster,\r\n  type: WalletType,\r\n): Promise<Wallet> => {\r\n  const newWallet = createWallet(type, cluster);\r\n\r\n  // assign the singleton wallet.\r\n  // Using a separate variable to simplify the type definitions\r\n  wallet = newWallet;\r\n  connection = getConnection(cluster);\r\n\r\n  // connect is done once the wallet reports that it is connected.\r\n  return new Promise((resolve) => {\r\n    newWallet.on(WalletEvent.CONNECT, () => resolve(newWallet));\r\n  });\r\n};\r\n\r\nexport const disconnect = (): void => wallet?.disconnect();\r\n\r\nexport const makeTransaction = async (\r\n  instructions: (TransactionInstruction | TransactionInstructionCtorFields)[],\r\n  signers: Account[] = [],\r\n): Promise<Transaction> => {\r\n  if (!wallet || !connection) {\r\n    throw new Error(ERROR_CONNECT_FIRST);\r\n  }\r\n\r\n  const { blockhash: recentBlockhash } = await connection.getRecentBlockhash();\r\n\r\n  const signatures = [{ publicKey: wallet.pubkey }, ...signers];\r\n  const transaction = new Transaction({\r\n    recentBlockhash,\r\n    signatures,\r\n  });\r\n  transaction.add(...instructions);\r\n\r\n  // if there are any cosigners (other than the current wallet)\r\n  // sign the transaction\r\n  if (signers.length > 0) {\r\n    transaction.partialSign(...signers);\r\n  }\r\n\r\n  return transaction;\r\n};\r\n\r\ninterface SendOptions {\r\n  commitment: Commitment;\r\n  preflightCommitment: Commitment;\r\n}\r\n\r\nconst defaultSendOptions = {\r\n  commitment: DEFAULT_COMMITMENT,\r\n  preflightCommitment: DEFAULT_COMMITMENT,\r\n};\r\n\r\nasync function awaitConfirmation(\r\n  signature: string,\r\n  commitment:\r\n    | 'processed'\r\n    | 'confirmed'\r\n    | 'finalized'\r\n    | 'recent' // Deprecated as of v1.5.5\r\n    | 'single' // Deprecated as of v1.5.5\r\n    | 'singleGossip' // Deprecated as of v1.5.5\r\n    | 'root' // Deprecated as of v1.5.5\r\n    | 'max'\r\n    | undefined,\r\n) {\r\n  console.log(`Submitted transaction ${signature}, awaiting confirmation`);\r\n  await confirmTransaction(signature, commitment);\r\n  console.log(`Transaction ${signature} confirmed`);\r\n\r\n  if (wallet) {\r\n    wallet.emit(WalletEvent.CONFIRMED, { transactionSignature: signature });\r\n  }\r\n\r\n  // workaround for a known solana web3 bug where\r\n  // the state obtained from the http endpoint and the websocket are out of sync\r\n  await sleep(POST_TRANSACTION_SLEEP_MS);\r\n  return signature;\r\n}\r\n\r\nexport const sendTransaction = async (\r\n  transaction: Transaction,\r\n  {\r\n    commitment = defaultSendOptions.commitment,\r\n    preflightCommitment = defaultSendOptions.preflightCommitment,\r\n  }: Partial<SendOptions> = defaultSendOptions,\r\n): Promise<string> => {\r\n  if (!wallet || !connection) {\r\n    throw new Error(ERROR_CONNECT_FIRST);\r\n  }\r\n\r\n  console.log('Sending signature request to wallet');\r\n  const signed = await wallet.sign(transaction);\r\n  console.log('Got signature, submitting transaction');\r\n\r\n  for (const { signature, publicKey } of signed.signatures) {\r\n    if (!signature) {\r\n      console.log('1 false', signature, publicKey.toBase58(), transaction);\r\n    } else if (\r\n      !nacl.sign.detached.verify(\r\n        signed.serializeMessage(),\r\n        signature,\r\n        publicKey.toBuffer(),\r\n      )\r\n    ) {\r\n      console.log('2 false', signature, publicKey.toBase58(), transaction);\r\n    }\r\n  }\r\n\r\n  console.log(111);\r\n\r\n  const signature = await connection.sendRawTransaction(signed.serialize(), {\r\n    preflightCommitment,\r\n  });\r\n\r\n  return awaitConfirmation(signature, commitment);\r\n};\r\n\r\nexport const getWallet = (): Wallet => {\r\n  if (!wallet || !connection) {\r\n    throw new Error('notification.error.noWallet');\r\n  }\r\n\r\n  return wallet;\r\n};\r\n\r\nexport const getBalance = (publicKey: PublicKey): Promise<number> => {\r\n  if (!wallet || !connection) {\r\n    throw new Error(ERROR_CONNECT_FIRST);\r\n  }\r\n\r\n  return connection.getBalance(publicKey);\r\n};\r\n\r\nexport const getMinimumBalanceForRentExemption = (\r\n  length: number,\r\n): Promise<number> => {\r\n  if (!wallet || !connection) {\r\n    throw new Error(ERROR_CONNECT_FIRST);\r\n  }\r\n\r\n  return connection.getMinimumBalanceForRentExemption(length);\r\n};\r\n","import SolletWalletAdapter from '@project-serum/sol-wallet-adapter';\r\nimport { PublicKey, Transaction } from '@solana/web3.js';\r\n\r\nimport { Wallet, WalletEvent } from './Wallet';\r\n\r\nconst DEFAULT_PROVIDER = 'https://www.sollet.io';\r\n\r\n/**\r\n * Wallet implementation for the sollet.io wallet.\r\n * It opens a popup browser window that prompts a user\r\n * to create and connect a simple web wallet.\r\n */\r\nexport class SolletWallet extends Wallet {\r\n  private solletWallet: SolletWalletAdapter;\r\n\r\n  constructor(network: string, provider: string = DEFAULT_PROVIDER) {\r\n    super(network);\r\n    this.solletWallet = new SolletWalletAdapter(provider, network);\r\n\r\n    // once the sollet wallet emits a connect or disconnect event, pass it on\r\n    this.solletWallet.on(WalletEvent.CONNECT, () => this.emit(WalletEvent.CONNECT));\r\n    this.solletWallet.on(WalletEvent.DISCONNECT, () => this.emit(WalletEvent.DISCONNECT));\r\n\r\n    void this.solletWallet.connect();\r\n  }\r\n\r\n  get pubkey(): PublicKey {\r\n    return this.solletWallet.publicKey;\r\n  }\r\n\r\n  disconnect(): void {\r\n    this.solletWallet.disconnect();\r\n  }\r\n\r\n  signTransaction(transaction: Transaction): Promise<Transaction> {\r\n    return this.solletWallet.signTransaction(transaction);\r\n  }\r\n}\r\n","import { app } from 'models/app';\r\n\r\nexport const $ratesMap = app.createStore<Rates>({});\r\n\r\nexport const fetchRatesFx = app.createEffect<void, FetchRates[]>();\r\n","import React, { ButtonHTMLAttributes, FC } from 'react';\r\n\r\nimport { styled } from '@linaria/react';\r\nimport classNames from 'classnames';\r\n\r\nconst ButtonElement = styled.button`\r\n  height: 46px;\r\n  padding: 0 40px;\r\n\r\n  font-family: Titillium Web, sans-serif;\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n  line-height: 100%;\r\n  white-space: nowrap;\r\n\r\n  border-radius: 12px;\r\n  outline: 0;\r\n\r\n  &.primary {\r\n    color: #fff;\r\n\r\n    background: #5887ff;\r\n  }\r\n\r\n  &.hollow {\r\n    color: #5887ff;\r\n\r\n    background: #ffffff;\r\n  }\r\n\r\n  &.full {\r\n    width: 100%;\r\n  }\r\n\r\n  &:disabled {\r\n    color: #fff;\r\n\r\n    background: #a3a5ba;\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  primary?: boolean;\r\n  hollow?: boolean;\r\n  full?: boolean;\r\n}\r\n\r\nexport const Button: FC<Props & ButtonHTMLAttributes<HTMLButtonElement>> = ({\r\n  onClick,\r\n  primary,\r\n  hollow,\r\n  full,\r\n  disabled,\r\n  children,\r\n  style,\r\n  className,\r\n}) => {\r\n  return (\r\n    <ButtonElement\r\n      disabled={disabled}\r\n      onClick={onClick}\r\n      style={style}\r\n      className={classNames(className, { primary, hollow, full })}\r\n    >\r\n      {children}\r\n    </ButtonElement>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\n\r\nimport { styled } from '@linaria/react';\r\nimport avatarImg from './avatar.png';\r\n\r\nconst Wrapper = styled.div<{\r\n  src?: string;\r\n  size?: string | number;\r\n  circle?: boolean;\r\n}>`\r\n  width: ${(props) => props.size || '32'}px;\r\n  height: ${(props) => props.size || '32'}px;\r\n\r\n  background-image: ${(props) => (props.src ? `url(\"${props.src}\")` : 'none')};\r\n  background-size: ${(props) => props.size || '32'}px;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  border-radius: 50%;\r\n\r\n  &:not([src]) {\r\n    background-color: #f6f6f8;\r\n    background-image: url('${avatarImg}');\r\n    background-size: 17px 15px;\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  // TODO: src is temp, use symbol and find icon\r\n  src?: string;\r\n  symbol?: string;\r\n  size?: string | number;\r\n}\r\n\r\nexport const Avatar: FC<Props> = ({ src, symbol, size }) => {\r\n  return <Wrapper src={src} size={size} />;\r\n};\r\n"],"sourceRoot":""}